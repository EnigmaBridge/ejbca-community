<?xml version="1.0"?>
<document>

  <properties>
    <title>Architecture</title>
  </properties>

<body>
  <section name="Sample setup architecture">
    <p>
    	The following diagram shows a good example setup of a secured CA with external OCSP responders
    	and an external RA server that receives certificate requests. The request are periodically 
    	pulled by the CA and responses returned to the <a href="externalra.html">External RA</a>. 
    	No network traffic flows from the right the left across FW2.
    </p>
    <p>
    <img src="images/sample-full-setup.jpg" alt="EJBCA sample setup" />
    </p>
  </section>

  <section name="Internal architecture">
    <p>
    	The following diagram is a very rough schema of the current architecture of EJBCA.
    </p>
    <p>
    <img src="images/architecture.png" alt="EJBCA architecture" />
    </p>
    <p>
    All the web modules are packaged as Web Archives (WAR) and packaged inside an Enterprise Archive (EAR) together with EJB modules for business logic,
    code for mapping Java objects to database rows and additional libraries need by the application that isn't provided by the application server.
    </p>
  <subsection name="EJB Stateless Session Beans Dependencies">
    <p>
        The following diagram shows the internal relations between the Stateless Session Beans as they are injected.
        An updated version of this diagram can be generated by running "ant gen-depgraph" on a machine where the
        "dot" application is available. 
    </p>
    <p>
        <img src="images/ejbca_4_0_0.png" alt="EJB dependencies" />
    </p>
  
  </subsection>
  </section>

</body>
</document>

